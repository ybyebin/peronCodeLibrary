/*! test 2017-04-13 */

function getCommunicationError(){$.ajax({url:apiurl+"r=api/system/connect/list",type:"post",dataType:"json",success:function(a){$(".loading").hide(),a.success?comErrorjqaddRow($("#commexc-tbody"),a.data):(layer.msg(a.error_message),returnLogIn(a.error_message))},error:function(a){layer.msg(a.error_message)}})}function comErrorjqaddRow(a,b){null==b?(b=[{commec:"commec"}],layer.msg("无通讯状态信息")):0==b.length&&layer.msg("无通讯状态信息");var c=b.length;for(var d in b)switch(Number(b[d].status)){case 0:b[d].status="异常";break;case 1:b[d].status="正常"}if(Number(c)<14)for(var e=14-c,f={commec:"commec"},d=0;d<e;d++)b.push(f);a.html("");for(var g in b){var h="";h=b[g].commec?'<tr"><td></td><td></td><td></td><td></td></tr>':"异常"===b[g].status?'<tr"><td>'+b[g].name+"</td><td >"+b[g].ip+'</td><td style="color:red;">'+b[g].status+"</td><td>"+b[g].time+"</td></tr>":'<tr"><td>'+b[g].name+"</td><td >"+b[g].ip+"</td><td>"+b[g].status+"</td><td>"+b[g].time+"</td></tr>",a.append(h)}}$("#foot").load("public.html"),function(a){a(window).load(function(){a(".commexc-div").mCustomScrollbar()})}(jQuery),$(function(){publicHeadfun(),getCommunicationError(),setInterval(function(){getCommunicationError()},3e3)});