function loadTargetData(a){$.ajax({url:apiurl+"r=api/energy/target/list",type:"post",dataType:"json",data:{data:JSON.stringify({type:a})},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(t){if($(".loading").hide(),t.success)switch(a){case"day":$("#day_t .all_consumption").val(t.data[0].value),$("#day_t .one_consumption").val(t.data[1].value),$("#day_t .two_consumption").val(t.data[2].value),$("#day_t .three_consumption").val(t.data[3].value),$("#day_t .four_consumption").val(t.data[4].value),$("#day_t .all_consumption").data("id",t.data[0].id),$("#day_t .one_consumption").data("id",t.data[1].id),$("#day_t .two_consumption").data("id",t.data[2].id),$("#day_t .three_consumption").data("id",t.data[3].id),$("#day_t .four_consumption").data("id",t.data[4].id),$("#day_t .all_consumption").data("groupid",t.data[0].energy_group_id),$("#day_t .one_consumption").data("groupid",t.data[1].energy_group_id),$("#day_t .two_consumption").data("groupid",t.data[2].energy_group_id),$("#day_t .three_consumption").data("groupid",t.data[3].energy_group_id),$("#day_t .four_consumption").data("groupid",t.data[4].energy_group_id);break;case"month":$("#mont_t .all_consumption").val(t.data[0].value),$("#mont_t .one_consumption").val(t.data[1].value),$("#mont_t .two_consumption").val(t.data[2].value),$("#mont_t .three_consumption").val(t.data[3].value),$("#mont_t .four_consumption").val(t.data[4].value),$("#mont_t .all_consumption").data("id",t.data[0].id),$("#mont_t .one_consumption").data("id",t.data[1].id),$("#mont_t .two_consumption").data("id",t.data[2].id),$("#mont_t .three_consumption").data("id",t.data[3].id),$("#mont_t .four_consumption").data("id",t.data[4].id),$("#mont_t .all_consumption").data("groupid",t.data[0].energy_group_id),$("#mont_t .one_consumption").data("groupid",t.data[1].energy_group_id),$("#mont_t .two_consumption").data("groupid",t.data[2].energy_group_id),$("#mont_t .three_consumption").data("groupid",t.data[3].energy_group_id),$("#mont_t .four_consumption").data("groupid",t.data[4].energy_group_id)}else layer.msg(t.error_message),returnLogIn(t.error_message)},error:function(a){$(".loading").hide(),layer.msg(a.error_message)}})}$("#foot").load("public.html"),$(function(){publicHeadfun(),loadTargetData("day")}),$("#tab ul li a").on("click",function(){loadTargetData($(this).data("type"))}),$("#day_t .btn_sure_consumption").on("click",function(){var a=apiurl+"r=api/energy/target/update",t=[],o=[],n=!0;if($("#day_t").find("input").each(function(a,t){if(Number($(t).val())<0||Number($(t).val())>9999999)return n=!1,!1}),n){$("#day_t").find("input").each(function(a,t){var n={id:$(t).data("id"),groupid:$(t).data("groupid"),val:$(t).val()};o.push(n)});for(var d=0;d<5;d++){var e={id:o[d].id,energy_group_id:o[d].groupid,type:"day",value:o[d].val};t.push(e)}var i={data:JSON.stringify(t)};$.ajax({url:a,type:"post",dataType:"json",data:i,beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(a){$(".loading").hide(),a.success?layer.msg("日目标值设定成功"):layer.msg("失败原因:"+a.error_message)},error:function(a){$(".loading").hide(),layer.msg("失败原因:"+a.error_message)}})}else layer.msg("请检查输入数据是否准确")}),$("#mont_t .btn_sure_consumption").on("click",function(){var a=apiurl+"r=api/energy/target/update",t=[],o=[],n=!0;if($("#mont_t").find("input").each(function(a,t){if(Number($(t).val())<0||Number($(t).val())>9999999)return n=!1,!1}),n){$("#mont_t").find("input").each(function(a,t){var n={id:$(t).data("id"),groupid:$(t).data("groupid"),val:$(t).val()};o.push(n)});for(var d=0;d<5;d++){var e={id:o[d].id,energy_group_id:o[d].groupid,type:"month",value:o[d].val};t.push(e)}var i={data:JSON.stringify(t)};$.ajax({url:a,type:"post",dataType:"json",data:i,beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(a){$(".loading").hide(),a.success?layer.msg("月目标值设定成功"):layer.msg("失败原因:"+a.error_message)},error:function(a){$(".loading").hide(),layer.msg("失败原因:"+a.error_message)}})}else layer.msg("请检查输入数据是否准确")});