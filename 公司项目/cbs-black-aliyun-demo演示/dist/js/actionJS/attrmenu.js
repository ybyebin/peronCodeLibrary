function getNode(){if(""!==$("#spanid").text()){var e=imageCanvas.getFigure($("#spanid").text()),o=imageCanvas.getLine($("#spanid").text());if(null!==e)return e;if(null!==o)return o}}function contentSearchInput(e){$.ajax({url:apiurl+"tag",type:"GET",dataType:"json",data:{name:$("#content-search-input").val(),page:e,page_item_count:9},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(o){if($(".loading").hide(),o.success)if(null===o.data.items)$(".search_no_datalabel").show(),$("#search_datalabel_tab").hide(),$(".tcdPageCode").hide();else{$(".search_no_datalabel").hide(),$("#search_datalabel_tab").show(),$(".tcdPageCode").show(),$(".tcdPageCode").createPage({pageCount:o.data.pageCount,current:e,backFn:function(e){contentSearchInput(e)}});var t=o.data.items,a={};for(var r in t)switch(a[String(t[r].id)]=t[r].id,Number(t[r].tag_type)){case 1:t[r].tag_types="开关型";break;case 2:t[r].tag_types="整数型";break;case 3:t[r].tag_types="实数型";break;case 4:t[r].tag_types="字符型"}$("#search_datalabel_tab tbody tr td").html(""),$("#search_datalabel_tab tbody tr").each(function(e,o){if(e<t.length){var a='<td class="bdtag-name">'+t[e].name+"</td><td>"+t[e].tag_types+'</td><td class="bdtag-des">'+t[e].description+'</td><td class="bdtag-nodename">'+t[e].node_name+"</td><td>"+t[e].point_id+'</td><td><input data-type ="'+t[e].tag_type+'" data-id="'+t[e].id+'" data-name="'+t[e].name+'" type="radio"  class="search_ckss" name="search_ckss"></td>';$(o).html(a)}}),switchInterface()}},error:function(e){$(".loading").hide()}})}function showPreview(e){var o=e.files[0];if(null!=o){if(!/image\/\w+/.test(o.type))return layer.msg("请确保文件为图像类型"),!1;if(window.FileReader){var t=new FileReader;t.readAsDataURL(o),t.onload=function(e){$.ajax({url:apiurl+"fileupload",type:"post",dataType:"json",data:{data:e.target.result},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(o){$(".loading").hide(),o.success?(layer.msg("图片上传成功"),$("#myBgimage").data("url",o.data),$("#myBgimage").css("background-image","url("+e.target.result+")"),$("#canvas-img").val(o.data)):layer.msg("上传图片失败:"+o.error_message)},error:function(e){$(".loading").hide(),layer.msg("上传图片失败:"+e.error_message)}})}}}}function imageShowPreviewStyle(e){var o=e.files[0];if(null!=o){if(!/image\/\w+/.test(o.type))return layer.msg("请确保文件为图像类型"),!1;if(window.FileReader){var t=new FileReader;t.readAsDataURL(o),t.onload=function(e){var o=getNode();$.ajax({url:apiurl+"fileupload",type:"post",dataType:"json",data:{data:e.target.result},beforeSend:function(){$(".loading").show()},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(t){$(".loading").hide(),t.success?(layer.msg("图片上传成功"),$("#style-image").val(t.data),o.userData.picture=t.data,o.image.setPath(e.target.result),o.repaint()):layer.msg("上传图片失败:"+t.error_message)},error:function(e){$(".loading").hide(),layer.msg("上传图片失败:"+e.error_message)}})}}}}function imageShowPreviewOnTrue(e){var o=e.files[0];if(null!=o){if(!/image\/\w+/.test(o.type))return layer.msg("请确保文件为图像类型"),!1;if(window.FileReader){var t=new FileReader;t.readAsDataURL(o),t.onload=function(e){var o=getNode();$.ajax({url:apiurl+"fileupload",type:"post",dataType:"json",data:{data:e.target.result},beforeSend:function(){$(".loading").show()},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(e){$(".loading").hide(),e.success?(layer.msg("图片上传成功"),$("#ontrue-image").val(e.data),o.userData.onTrue.picture=e.data):layer.msg("上传图片失败:"+e.error_message)},error:function(e){$(".loading").hide(),layer.msg("上传图片失败:"+e.error_message)}})}}}}function imageShowPreviewOnFalse(e){var o=e.files[0];if(null!=o){if(!/image\/\w+/.test(o.type))return layer.msg("请确保文件为图像类型"),!1;if(window.FileReader){var t=new FileReader;t.readAsDataURL(o),t.onload=function(e){var o=getNode();$.ajax({url:apiurl+"fileupload",type:"post",dataType:"json",data:{data:e.target.result},beforeSend:function(){$(".loading").show()},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(e){$(".loading").hide(),e.success?(layer.msg("图片上传成功"),$("#onfalse-image").val(e.data),o.userData.onFalse.picture=e.data):layer.msg("上传图片失败:"+e.error_message)},error:function(e){$(".loading").hide(),layer.msg("上传图片失败:"+e.error_message)}})}}}}function imageShowPreviewOnAlerm(e){var o=e.files[0];if(null!=o){if(!/image\/\w+/.test(o.type))return layer.msg("请确保文件为图像类型"),!1;if(window.FileReader){var t=new FileReader;t.readAsDataURL(o),t.onload=function(e){var o=getNode();$.ajax({url:apiurl+"fileupload",type:"post",dataType:"json",data:{data:e.target.result},beforeSend:function(){$(".loading").show()},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(e){$(".loading").hide(),e.success?(layer.msg("图片上传成功"),$("#onalarm-image").val(e.data),o.userData.onAlarm.picture=e.data):layer.msg("上传图片失败:"+e.error_message)},error:function(e){$(".loading").hide(),layer.msg("上传图片失败:"+e.error_message)}})}}}}function imageShowPreviewOnDisconnected(e){var o=e.files[0];if(null!=o){if(!/image\/\w+/.test(o.type))return layer.msg("请确保文件为图像类型"),!1;if(window.FileReader){var t=new FileReader;t.readAsDataURL(o),t.onload=function(e){var o=getNode();$.ajax({url:apiurl+"fileupload",type:"post",dataType:"json",data:{data:e.target.result},beforeSend:function(){$(".loading").show()},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(e){$(".loading").hide(),e.success?(layer.msg("图片上传成功"),$("#onDisc-image").val(e.data),o.userData.onDisconnected.picture=e.data):layer.msg("上传图片失败:"+e.error_message)},error:function(e){$(".loading").hide(),layer.msg("上传图片失败:"+e.error_message)}})}}}}function resetAttributeMenu(){$(".first-attr").show(),$(".second-attr").hide(),$(".div-alpha").hide(),$(".div-unit").hide(),$(".div-font-size").hide(),$(".div-text-alpha").hide(),$(".tab-ul li:first-child a").click(),$("p.p-show").each(function(e,o){$(o).hasClass("collapsed")&&$(o).click()}),$("p.p-hide").each(function(e,o){$(o).hasClass("collapsed")||$(o).click()}),$(".div-basic-hide").show(),$(".just-for-label").show(),$(".div-line-only").show(),$(".div-fill").hide(),$(".div-vlcurl").hide(),$(".div-line-check").hide(),$(".div-normal-width").show(),$(".div-line-conduit").hide(),setTimeout(function(){$(".component-attr").mCustomScrollbar("scrollTo","top")},300)}function checkComponentTagidIsNull(){if(getNode()){switch(getNode().userData.Tag.bingding_status){case 2:layer.msg("上个控件Tag值绑定无效,请重新绑定!")}}}function checkThisComponentIsTrue(e){switch(e.userData.Tag.bingding_status){case 0:$("#tagWrongImg").hide();break;case 1:$("#tagWrongImg").show(),$("#tagWrongImg").attr("src","images/img/rights.png");break;case 2:$("#tagWrongImg").show(),$("#tagWrongImg").attr("src","images/img/worry.png")}}function getColor(e){if(getNode()){var o,t=getNode();switch(e){case"sty_border_color":o=t.getColor().hash().substring(1);break;case"sty_text_color":o=t.getFontColor().hash().substring(1);break;case"sty_fill_color":o=t.getBackgroundColor().hash().substring(1);break;case"true_border_color":o=t.getUserData().onTrue.LineColor.substring(1);break;case"true_text_color":o=t.getUserData().onTrue.TextColor.substring(1);break;case"true_fill_color":o=t.getUserData().onTrue.FillColor.substring(1);break;case"false_border_color":o=t.getUserData().onFalse.LineColor.substring(1);break;case"false_text_color":o=t.getUserData().onFalse.TextColor.substring(1);break;case"false_fill_color":o=t.getUserData().onFalse.FillColor.substring(1);break;case"alarm_border_color":o=t.getUserData().onAlarm.LineColor.substring(1);break;case"alarm_text_color":o=t.getUserData().onAlarm.TextColor.substring(1);break;case"alarm_fill_color":o=t.getUserData().onAlarm.FillColor.substring(1);break;case"dis_border_color":o=t.getUserData().onDisconnected.LineColor.substring(1);break;case"dis_text_color":o=t.getUserData().onDisconnected.TextColor.substring(1);break;case"dis_fill_color":o=t.getUserData().onDisconnected.FillColor.substring(1)}return o}}function zero_fill_hex(e,o){for(var t=e.toString(16);t.length<o;)t="0"+t;return t}function rgb2hex(e){if("#"==e.charAt(0))return e;var o=e.split(/\D+/);return"#"+zero_fill_hex(65536*Number(o[1])+256*Number(o[2])+Number(o[3]),6)}function switchInterface(){$(".search_ckss").iCheck("destroy"),$(".search_ckss").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"})}function showTooltips(e){var o=$("#tooltips");if(""!==e.userData.Hint){o.show().html(e.userData.Hint);var t=e.getAbsoluteX()+e.getWidth()/2-o.width()/2-10,a=e.getAbsoluteY()+e.getHeight()+10;o.css({top:a+"px",left:t+"px"})}}$(function(){var e=["#F5A623","#7ED321","#F57373","#35C99D","#000000","#999999","#FFFFFF","#4A4A4A","#03A3FC","#DDDDDD"];$(".color-board").each(function(o,t){$(t).find("li").each(function(o,t){$(t).css("background-color",e[o])})}),$(".ckss").iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",increaseArea:"20%"}),projectInfo()}),$("#horizontal").on("ifChecked",function(e){if(getNode()){var o=getNode(),t=o.getVertices();t.data[1].y=t.data[0].y,o.setVertices(t),o.repaint()}}),$("#vertical").on("ifChecked",function(e){if(getNode()){var o=getNode(),t=o.getVertices();t.data[1].x=t.data[0].x,o.setVertices(t),o.repaint()}}),$("#comp-name").on("input",function(){if(getNode()){getNode().userData.name=$("#comp-name").val()}}),$("#comp-desc").on("input",function(){if(getNode()){getNode().userData.Description=$("#comp-desc").val()}}),$("#comp-width").on("input",function(){if(getNode()){var e=getNode();if(Number($("#comp-width").val())<5)return;e.isResizeable()?(e.setWidth($("#comp-width").val()),e.repaint()):layer.msg("该控件不支持缩放")}}),$("#comp-height").on("input",function(){if(getNode()){var e=getNode();if(Number($("#comp-height").val())<5)return;e.isResizeable()?(e.setHeight($("#comp-height").val()),e.repaint()):layer.msg("该控件不支持缩放")}}),$("#comp-offsetx").on("input",function(){if(getNode()){var e=getNode();if("LineComponent"===e.userData.types){var o=e.getVertices();o.data[0].x=Number($("#comp-offsetx").val()),e.setVertices(o)}else e.setX($("#comp-offsetx").val());e.repaint()}}),$("#comp-offsety").on("input",function(){if(getNode()){var e=getNode();if("LineComponent"===e.userData.types){var o=e.getVertices();o.data[0].y=Number($("#comp-offsety").val()),e.setVertices(o)}else e.setY($("#comp-offsety").val());e.repaint()}}),$("#comp-rotation").on("input",function(){if(getNode()){var e=getNode(),o=$("#comp-rotation").val(),t=Number(o);if(""==o)return;(t>=-359||t<=359)&&(e.setRotationAngle(t),e.image.setRotationAngle(t),e.repaint())}}),$("#comp-title").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?(o.userData.ShowCaption=!0,o.label.setVisible(!0),$("#comp-title-val").removeAttr("readonly"),o.label.setText(o.userData.Caption)):(o.userData.ShowCaption=!1,o.label.setVisible(!1),$("#comp-title-val").attr("readonly","readonly")),o.repaint()}}),$("#comp-title-val").on("input",function(){if(getNode()){var e=getNode();e.label.setText($("#comp-title-val").val()),e.userData.Caption=$("#comp-title-val").val(),e.label.repaint()}}),$("#comp-hover").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?(o.userData.ShowHint=!0,$("#comp-hover-val").removeAttr("readonly"),$("#comp-hover-val").val(o.getUserData().Hint)):(o.userData.ShowHint=!1,$("#comp-hover-val").attr("readonly","readonly"),$("#comp-hover-val").val(o.getUserData().Hint))}}),$("#comp-hover-val").on("input",function(){if(getNode()){getNode().userData.Hint=$("#comp-hover-val").val()}}),$("#comp-hides").on("ifChanged",function(e){if(getNode()){layer.msg("隐藏组件");var o=getNode();$(this).is(":checked")?(o.setAlpha(0),$("#comp-title").iCheck("disable"),o.image&&o.image.setAlpha(0),o.label&&o.label.setAlpha(0),console,"conduitCompontent"===o.userData.types&&o.setVisible(!1),o.userData.Visible=!1):(o.setAlpha(1),$("#comp-title").iCheck("enable"),o.image&&o.image.setAlpha(1),!0===o.userData.ShowCaption&&o.label.setAlpha(1),"conduitCompontent"===o.userData.types&&o.setVisible(!0),o.userData.Visible=!0),o.repaint()}}),$("#comp-unabel").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?o.userData.Enable=!0:o.userData.Enable=!1}}),$(".comp-level-ul li a").on("click",function(){if(getNode()){getNode().userData.AccessLevel=$(this).html(),$("#comp-level").text($(this).html())}}),$("#comp-vlc-val").on("input",function(){if(getNode()){getNode().userData.vlcurl=$("#comp-vlc-val").val()}}),$("#comp-tagaddress").on("input",function(){if(getNode()){var e=getNode();$.ajax({url:apiurl+"tag",type:"GET",dataType:"json",data:{name:$("#comp-tagaddress").val()},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(o){$(".loading").hide(),o.success?(e.userData.Tag.tag_type=Number(o.data.tag_type),e.userData.Tag.tag_id=o.data.tag_id,e.userData.Tag.tag_name=o.data.tag_name,e.userData.Tag.bingding_status=1,$("#tagWrongImg").show(),$("#tagWrongImg").attr("src","../images/img/right.png")):(e.userData.Tag.tag_type="",e.userData.Tag.tag_id="",e.userData.Tag.tag_name=$("#comp-tagaddress").val(),e.userData.Tag.bingding_status=2,$("#tagWrongImg").show(),$("#tagWrongImg").attr("src","../images/img/worry.png"))},error:function(o){$(".loading").hide(),e.userData.Tag.tag_type="",e.userData.Tag.tag_id="",e.userData.Tag.tag_name=$("#comp-tagaddress").val(),e.userData.Tag.bingding_status=2,$("#tagWrongImg").show(),$("#tagWrongImg").attr("src","../images/img/worry.png")}})}}),$("#comp-tagaddress-btn").on("click",function(){layer.open({title:["绑定数据标签","font-size:18px;color:#fff;background:#3E4687;height:50px;font-weight:bold;line-height:50px;padding-left:30px;border:none;"],type:1,skin:"layui-primary",area:["900px","655px"],content:$("#search-datalabel"),shift:2,move:!1,btn:["保存","取消"],success:function(e){},yes:function(e){if(null===$('input[name="search_ckss"]:checked').data("id"))layer.msg("未选中任何标签");else{var o=getNode();o.userData.Tag.tag_type=Number($('input[name="search_ckss"]:checked').data("type")),o.userData.Tag.tag_id=Number($('input[name="search_ckss"]:checked').data("id")),o.userData.Tag.tag_name=String($('input[name="search_ckss"]:checked').data("name")),o.userData.Tag.bingding_status=1,$("#comp-tagaddress").val($('input[name="search_ckss"]:checked').data("name")),$("#tagWrongImg").show(),$("#tagWrongImg").attr("src","images/img/rights.png"),layer.close(e)}},btn2:function(e){$("#tagWrongImg").hide(),layer.close(e)}})}),$("#comp-readonly").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?o.userData.Readonly=!0:o.userData.Readonly=!1}}),$(".style-width-ul li a").on("click",function(){if(getNode()){var e=getNode();e.setStroke(Number($(this).html())),e.userData.BlinkingStroke=Number($(this).html()),$("#style-width").text($(this).html())}}),$("#comp-conline-width").on("input",function(){if(getNode()){var e=getNode();e.setStroke(Number($(this).val())),e.userData.BlinkingStroke=Number($(this).val()),e.repaint()}}),$(".style-style-ul li a").on("click",function(){if(getNode()){var e=getNode();$("#style-style").text($(this).html()),"默认"===$(this).html()?(e.setDashArray(""),e.userData.DashArray=""):(e.setDashArray($(this).html()),e.userData.DashArray=$(this).html())}}),$(".style-border-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".style-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.BlinkingColor=String(rgb2hex($(this).css("background-color"))),e.setColor(String(rgb2hex($(this).css("background-color")))),e.repaint()):($(this).addClass("colorWhiteBorder"),e.userData.BlinkingColor=String(rgb2hex($(this).css("background-color"))),e.setColor(String(rgb2hex($(this).css("background-color")))),e.repaint())}}),$(".style-border-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("sty_border_color"))},onSubmit:function(e,o,t,a){var r=getNode();r.userData.BlinkingColor="#"+o,r.setColor("#"+o),r.repaint(),$(".style-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var l=!1;if($(".style-border-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return l=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;l=!0}),l){if($(".style-border-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var i='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var i='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".style-border-color ul").append(i)}}}),$("#style-text").on("input",function(){if(getNode()){var e=getNode();e.setText($("#style-text").val()),e.repaint()}}),$("#text-font-size").on("input",function(){if(getNode()&&!isNaN($(this).val())){var e=getNode();e.setFontSize(Number($(this).val())),e.repaint()}}),$(".style-text-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".style-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.setFontColor(String(rgb2hex($(this).css("background-color")))),e.repaint()):($(this).addClass("colorWhiteBorder"),e.setFontColor(String(rgb2hex($(this).css("background-color")))),e.repaint())}}),$(".style-text-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("sty_text_color"))},onSubmit:function(e,o,t,a){var r=getNode();r.setFontColor("#"+o),r.repaint(),$(".style-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var l=!1;if($(".style-text-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return l=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;l=!0}),l){if($(".style-text-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var i='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var i='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".style-text-color ul").append(i)}}}),$(".style-fill-color ul").on("click","li",function(){if(getNode()){var e=getNode();$("#text-alpha-style").iCheck("uncheck"),$("#text-alpha-style").iCheck("enable"),$(".style-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.setBackgroundColor(String(rgb2hex($(this).css("background-color")))),e.repaint()):($(this).addClass("colorWhiteBorder"),e.setBackgroundColor(String(rgb2hex($(this).css("background-color")))),e.repaint())}}),$(".style-fill-color span").colpick({layout:"hex",submitText:"确定",onSubmit:function(e,o,t,a){var r=getNode();r.setBackgroundColor("#"+o),r.repaint(),$("#text-alpha-style").iCheck("uncheck"),$("#text-alpha-style").iCheck("enable"),$(".style-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var l=!1;if($(".style-fill-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return l=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;l=!0}),l){if($(".style-fill-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var i='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var i='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".style-fill-color ul").append(i)}}}),$("#text-alpha-style").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")&&(o.setBackgroundColor("none"),$(".style-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$("#text-alpha-style").iCheck("disable"))}}),$("#comp-alpha-style").on("input",function(){if(getNode()&&!isNaN($(this).val()))if(Number($(this).val())>=0&&Number($(this).val())<=1){var e=getNode();e.setAlpha(Number($(this).val())),e.repaint()}else layer.msg("透明度范围 0~1")}),$("#comp-unit-style").on("input",function(){if(getNode()){getNode().userData.unit=$(this).val()}}),$("#style-flashing").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?(o.userData.Blinking=!0,o.startTimer(1e3)):(o.userData.Blinking=!1,o.stopTimer())}}),$("#style-image-btn").on("click",function(){$("#imageFileStyle").val("").click()}),$(".ontrue-width-ul li a").on("click",function(){if(getNode()){getNode().userData.onTrue.LineWidth=Number($(this).html()),$("#ontrue-width").text($(this).html())}}),$("#ontrue-conline-width").on("input",function(){if(getNode()){getNode().userData.onTrue.LineWidth=Number($(this).val())}}),$(".ontrue-style-ul li a").on("click",function(){if(getNode()){var e=getNode();$("#ontrue-style").text($(this).html()),"默认"===$(this).html()?e.userData.onTrue.LineStyle="":e.userData.onTrue.LineStyle=$(this).html()}}),$(".ontrue-border-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".ontrue-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onTrue.LineColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onTrue.LineColor=String(rgb2hex($(this).css("background-color"))))}}),$(".ontrue-border-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("true_border_color"))},onSubmit:function(e,o,t,a){getNode().userData.onTrue.LineColor="#"+o,$(".ontrue-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".ontrue-border-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".ontrue-border-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".ontrue-border-color ul").append(l)}}}),$("#ontrue-text").on("input",function(){if(getNode()){getNode().userData.onTrue.Text=$("#ontrue-text").val()}}),$(".ontrue-text-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".ontrue-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onTrue.TextColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onTrue.TextColor=String(rgb2hex($(this).css("background-color"))))}}),$(".ontrue-text-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("true_text_color"))},onSubmit:function(e,o,t,a){getNode().userData.onTrue.TextColor="#"+o,$(".ontrue-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".ontrue-text-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".ontrue-text-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".ontrue-text-color ul").append(l)}}}),$(".ontrue-fill-color ul").on("click","li",function(){if(getNode()){var e=getNode();$("#text-alpha-ontrue").iCheck("uncheck"),$("#text-alpha-ontrue").iCheck("enable"),$(".ontrue-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onTrue.FillColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onTrue.FillColor=String(rgb2hex($(this).css("background-color"))))}}),$(".ontrue-fill-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("true_fill_color"))},onSubmit:function(e,o,t,a){getNode().userData.onTrue.FillColor="#"+o,$("#text-alpha-ontrue").iCheck("uncheck"),$("#text-alpha-ontrue").iCheck("enable"),$(".ontrue-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".ontrue-fill-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".ontrue-fill-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".ontrue-fill-color ul").append(l)}}}),$("#text-alpha-ontrue").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")&&(o.setBackgroundColor("none"),$(".ontrue-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$("#text-alpha-ontrue").iCheck("disable"))}}),$("#comp-alpha-ontrue").on("input",function(){if(getNode()&&!isNaN($(this).val()))if(Number($(this).val())>=0&&Number($(this).val())<=1){var e=getNode();e.userData.onTrue.alpha=Number($(this).val())}else layer.msg("透明度范围 0~1")}),$("#comp-unit-ontrue").on("input",function(){if(getNode()){getNode().userData.onTrue.unit=$(this).val()}}),$("#ontrue-flashing").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?o.userData.onTrue.Blinking=!0:o.userData.onTrue.Blinking=!1}}),$("#ontrue-image-btn").on("click",function(){$("#imageFileOnTrue").val("").click()}),$(".onfalse-width-ul li a").on("click",function(){if(getNode()){getNode().userData.onFalse.LineWidth=$(this).html(),$("#onfalse-width").text($(this).html())}}),$("#onfalse-conline-width").on("input",function(){if(getNode()){getNode().userData.onFalse.LineWidth=$(this).val()}}),$(".onfalse-style-ul li a").on("click",function(){if(getNode()){var e=getNode();$("#onfalse-style").text($(this).html()),"默认"===$(this).html()?e.userData.onFalse.LineStyle="":e.userData.onFalse.LineStyle=$(this).html()}}),$(".onfalse-border-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".onfalse-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onFalse.LineColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onFalse.LineColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onfalse-border-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("false_border_color"))},onSubmit:function(e,o,t,a){getNode().userData.onFalse.LineColor="#"+o,$(".onfalse-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onfalse-border-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onfalse-border-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="li-bgColor colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="li-bgColor colorWhiteBorder" style="background: #'+o+'"></li>';$(".onfalse-border-color ul").append(l)}}}),$("#onfalse-text").on("input",function(){if(getNode()){getNode().userData.onFalse.Text=$("#onfalse-text").val()}}),$(".onfalse-text-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".onfalse-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onFalse.TextColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onFalse.TextColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onfalse-text-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("false_text_color"))},onSubmit:function(e,o,t,a){getNode().userData.onFalse.TextColor="#"+o,$(".onfalse-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onfalse-text-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onfalse-text-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".onfalse-text-color ul").append(l)}}}),$(".onfalse-fill-color ul").on("click","li",function(){if(getNode()){var e=getNode();$("#text-alpha-onfalse").iCheck("uncheck"),$("#text-alpha-onfalse").iCheck("enable"),$(".onfalse-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onFalse.FillColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onFalse.FillColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onfalse-fill-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("false_fill_color"))},onSubmit:function(e,o,t,a){getNode().userData.onFalse.FillColor="#"+o,$("#text-alpha-onfalse").iCheck("uncheck"),$("#text-alpha-onfalse").iCheck("enable"),$(".onfalse-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onfalse-fill-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onfalse-fill-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".onfalse-fill-color ul").append(l)}}}),$("#text-alpha-onfalse").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")&&(o.setBackgroundColor("none"),$(".onfalse-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$("#text-alpha-onfalse").iCheck("disable"))}}),$("#comp-alpha-onfalse").on("input",function(){if(getNode()&&!isNaN($(this).val()))if(Number($(this).val())>=0&&Number($(this).val())<=1){var e=getNode();e.userData.onFalse.alpha=Number($(this).val())}else layer.msg("透明度范围 0~1")}),$("#comp-unit-onfalse").on("input",function(){if(getNode()){getNode().userData.onFalse.unit=$(this).val()}}),$("#onfalse-flashing").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?o.userData.onFalse.Blinking=!0:o.userData.onFalse.Blinking=!1}}),$("#onfalse-image-btn").on("click",function(){$("#imageFileOnFalse").val("").click()}),$(".onalarm-width-ul li a").on("click",function(){if(getNode()){getNode().userData.onAlarm.LineWidth=$(this).html(),$("#onalarm-width").text($(this).html())}}),
$("#onalarm-conline-width").on("input",function(){if(getNode()){getNode().userData.onAlarm.LineWidth=$(this).val()}}),$(".onalarm-style-ul li a").on("click",function(){if(getNode()){var e=getNode();$("#onalarm-style").text($(this).html()),"默认"===$(this).html()?e.userData.onAlarm.LineStyle="":e.userData.onAlarm.LineStyle=$(this).html()}}),$(".onalarm-border-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".onalarm-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onAlarm.LineColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onAlarm.LineColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onalarm-border-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("alarm_border_color"))},onSubmit:function(e,o,t,a){getNode().userData.onAlarm.LineColor="#"+o,$(".onalarm-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onalarm-border-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onalarm-border-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".onalarm-border-color ul").append(l)}}}),$("#onalarm-text").on("input",function(){if(getNode()){getNode().userData.onAlarm.Text=$("#onalarm-text").val()}}),$(".onalarm-text-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".onalarm-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onAlarm.TextColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onAlarm.TextColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onalarm-text-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("alarm_text_color"))},onSubmit:function(e,o,t,a){getNode().userData.onAlarm.TextColor="#"+o,$(".onalarm-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onalarm-text-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onalarm-text-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".onalarm-text-color ul").append(l)}}}),$(".onalarm-fill-color ul").on("click","li",function(){if(getNode()){var e=getNode();$("#text-alpha-onalarm").iCheck("uncheck"),$("#text-alpha-onalarm").iCheck("enable"),$(".onalarm-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onAlarm.FillColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onAlarm.FillColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onalarm-fill-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("alarm_fill_color"))},onSubmit:function(e,o,t,a){getNode().userData.onAlarm.FillColor="#"+o,$("#text-alpha-onalarm").iCheck("uncheck"),$("#text-alpha-onalarm").iCheck("enable"),$(".onalarm-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onalarm-fill-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onalarm-fill-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".onalarm-fill-color ul").append(l)}}}),$("#text-alpha-onalarm").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")&&(o.setBackgroundColor("none"),$(".onalarm-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$("#text-alpha-onalarm").iCheck("disable"))}}),$("#comp-alpha-onalarm").on("input",function(){if(getNode()&&!isNaN($(this).val()))if(Number($(this).val())>=0&&Number($(this).val())<=1){var e=getNode();e.userData.onAlarm.alpha=Number($(this).val())}else layer.msg("透明度范围 0~1")}),$("#comp-unit-onalarm").on("input",function(){if(getNode()){getNode().userData.onAlarm.unit=$(this).val()}}),$("#onalarm-flashing").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?o.userData.onAlarm.Blinking=!0:o.userData.onAlarm.Blinking=!1}}),$("#onalarm-image-btn").on("click",function(){$("#imageFileOnAlerm").val("").click()}),$(".onDisc-width-ul li a").on("click",function(){if(getNode()){getNode().userData.onDisconnected.LineWidth=$(this).html(),$("#onDisc-width").text($(this).html())}}),$("#ondis-conline-width").on("input",function(){if(getNode()){getNode().userData.onDisconnected.LineWidth=$(this).val()}}),$(".onDisc-style-ul li a").on("click",function(){if(getNode()){var e=getNode();$("#onDisc-style").text($(this).html()),"默认"===$(this).html()?e.userData.onDisconnected.LineStyle="":e.userData.onDisconnected.LineStyle=$(this).html()}}),$(".onDisc-border-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".onDisc-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onDisconnected.LineColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onDisconnected.LineColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onDisc-border-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("dis_border_color"))},onSubmit:function(e,o,t,a){getNode().userData.onDisconnected.LineColor="#"+o,$(".onDisc-border-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onDisc-border-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onDisc-border-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="li-bgColor colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="li-bgColor colorWhiteBorder" style="background: #'+o+'"></li>';$(".onDisc-border-color ul").append(l)}}}),$("#onDisc-text").on("input",function(){if(getNode()){getNode().userData.onDisconnected.Text=$("#onDisc-text").val()}}),$(".onDisc-text-color ul").on("click","li",function(){if(getNode()){var e=getNode();$(".onDisc-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onDisconnected.TextColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onDisconnected.TextColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onDisc-text-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("dis_text_color"))},onSubmit:function(e,o,t,a){getNode().userData.onDisconnected.TextColor="#"+o,$(".onDisc-text-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onDisc-text-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onDisc-text-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".onDisc-text-color ul").append(l)}}}),$(".onDisc-fill-color ul ").on("click","li",function(){if(getNode()){var e=getNode();$("#text-alpha-ondisc").iCheck("uncheck"),$("#text-alpha-ondisc").iCheck("enable"),$(".onDisc-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),e.userData.onDisconnected.FillColor=String(rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),e.userData.onDisconnected.FillColor=String(rgb2hex($(this).css("background-color"))))}}),$(".onDisc-fill-color span").colpick({layout:"hex",submitText:"确定",onShow:function(){$(this).colpickSetColor(getColor("dis_fill_color"))},onSubmit:function(e,o,t,a){getNode().userData.onDisconnected.FillColor="#"+o,$("#text-alpha-ondisc").iCheck("uncheck"),$("#text-alpha-ondisc").iCheck("enable"),$(".onDisc-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(a).colpickHide();var r=!1;if($(".onDisc-fill-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".onDisc-fill-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".onDisc-fill-color ul").append(l)}}}),$("#text-alpha-onalarm").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")&&(o.setBackgroundColor("none"),$(".onDisc-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$("#text-alpha-ondisc").iCheck("disable"))}}),$("#comp-alpha-ondisc").on("input",function(){if(getNode()&&!isNaN($(this).val()))if(Number($(this).val())>=0&&Number($(this).val())<=1){var e=getNode();e.userData.onDisconnected.alpha=Number($(this).val())}else layer.msg("透明度范围 0~1")}),$("#comp-unit-ondis").on("input",function(){if(getNode()){getNode().userData.onDisconnected.unit=$(this).val()}}),$("#onDisc-flashing").on("ifChanged",function(e){if(getNode()){var o=getNode();$(this).is(":checked")?o.userData.onDisconnected.Blinking=!0:o.userData.onDisconnected.Blinking=!1}}),$("#onDisc-image-btn").on("click",function(){$("#imageFileOnDisconnected").val("").click()}),$(".canvas-fill-color ul ").on("click","li",function(){$(".canvas-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),"#ffffff"===rgb2hex($(this).css("background-color"))?($(this).addClass("colorBlackBorder"),$("#canvas").css("background-color",rgb2hex($(this).css("background-color")))):($(this).addClass("colorWhiteBorder"),$("#canvas").css("background-color",rgb2hex($(this).css("background-color")))),$(".canvas-fill-color span").colpickSetColor(rgb2hex($("#canvas").css("background-color")).substring(1))}),$("#canvas-attr span.add-color").colpick({layout:"hex",submitText:"确定",color:rgb2hex($("#canvas").css("background-color")).substring(1),color:"#35c99d",onSubmit:function(e,o,t,a){$("#canvas").css("background-color","#"+o),$(a).colpickHide(),$(a).colpickSetColor(rgb2hex($("#canvas").css("background-color")).substring(1));var r=!1;if($(".canvas-fill-color ul li").removeClass("colorWhiteBorder colorBlackBorder"),$(".canvas-fill-color ul li").each(function(e,t){if(o.toUpperCase()==rgb2hex($(t).css("background-color")).substring(1).toUpperCase())return r=!1,"FFFFF"===o.toUpperCase()?$(t).addClass("colorBlackBorder"):$(t).addClass("colorWhiteBorder"),!1;r=!0}),r){if($(".canvas-fill-color ul li:first-child").remove(),"FFFFF"===o.toUpperCase())var l='<li class="colorBlackBorder" style="background: #'+o+'"></li>';else var l='<li class="colorWhiteBorder" style="background: #'+o+'"></li>';$(".canvas-fill-color ul").append(l)}}}),$("#canvas-img-btn").on("click",function(){$("#fileField").val("").click()}),$("#clearImage").on("click",function(){$("#content-search-input").val("")}),$("#content-search-input").on("input",function(){""!==$(this).val()?contentSearchInput(1):layer.msg("输入框为空")}),$("#canvas").on("click",function(){$(".first-attr").show(),$(".second-attr").hide()}),$(".have-btn").on("click","button",function(){$(".first-attr").hide(),$(".second-attr").show()});var iForAdd=0;$(".span-add").on("click",function(){$(".no-glo-btn").hide();var e=(new Date).format("yyyyMMddhhmmss")+iForAdd;iForAdd+=1;var o='<p><button id="'+e+'" data-tag-id="-1" data-tag-name="" data-tag-type="-1" data-bingding-status="0" data-readonly="false" data-name="按钮">按钮</button><img src="images/delete.png"></p>';$(".have-btn #mCSB_2_container").prepend(o),$(".have-btn").mCustomScrollbar("scrollTo","top")}),$(".have-btn").on("click","img",function(){$(this).parent().remove(),""===$(".have-btn #mCSB_2_container").html()&&$(".no-glo-btn").show()}),$(".have-btn").on("click","button",function(){if($(".first-attr").hide(),$(".second-attr").show(),$(".have-btn p button").removeClass("active"),$(this).addClass("active"),$("#glo-title").data("id",$(this).attr("id")),$("#glo-btn-name").val($(this).data("name")),$("#glo-btn-tagname").val($(this).data("tag-name")),$(this).data("readonly")?$("#glo-checkbox").iCheck("check"):$("#glo-checkbox").iCheck("uncheck"),""!==$("#glo-title").data("id"))switch(Number($("#"+$("#glo-title").data("id")).data("bingding-status"))){case 2:layer.msg("控件Tag值绑定无效,请重新绑定")}switch(Number($(this).data("bingding-status"))){case 0:$("#glo-btn-img").hide();break;case 1:$("#glo-btn-img").show(),$("#glo-btn-img").attr("src","images/img/rights.png");break;case 2:$("#glo-btn-img").show(),$("#glo-btn-img").attr("src","images/img/worry.png")}}),$("#glo-btn-name").on("input",function(){$("#"+$("#glo-title").data("id")).data("name",$(this).val()),$("#"+$("#glo-title").data("id")).text($(this).val())}),$("#glo-btn-tagname").on("input",function(){if(""!==$("#glo-title").data("id")){var e=$("#"+$("#glo-title").data("id"));$.ajax({url:apiurl+"r=api/entity/tag/type",type:"post",dataType:"json",data:{data:JSON.stringify({tag_name:$("#glo-btn-tagname").val()})},beforeSend:function(){$(".loading").show()},complete:function(){$(".loading").hide()},success:function(o){$(".loading").hide(),o.success?(e.data("tag-type",o.data.tag_type),e.data("tag-id",o.data.tag_id),e.data("tag-name",o.data.tag_name),e.data("bingding-status",1),$("#glo-btn-img").show(),$("#glo-btn-img").attr("src","images/img/rights.png")):(e.data("tag-type",""),e.data("tag-id",""),e.data("tag-name",""),e.data("bingding-status",2),$("#glo-btn-img").show(),$("#glo-btn-img").attr("src","images/img/worry.png"))},error:function(o){$(".loading").hide(),e.data("tag-type",""),e.data("tag-id",""),e.data("tag-name",""),e.data("bingding-status",2),$("#glo-btn-img").show(),$("#glo-btn-img").attr("src","images/img/worry.png")}})}else layer.msg("请选中一个全局按钮")}),$("#glo-btn-btn").on("click",function(){layer.open({title:["绑定数据标签","font-size:18px;color:#fff;background:#3E4687;height:50px;font-weight:bold;line-height:50px;padding-left:30px;border:none;"],type:1,skin:"layui-primary",area:["900px","655px"],content:$("#search-datalabel"),shift:2,move:!1,btn:["保存","取消"],success:function(e){$("#content-search-input").val("")},yes:function(e){if(null===$('input[name="search_ckss"]:checked').data("id"))layer.msg("未选中任何标签");else{$("#glo-btn-tagname").val($('input[name="search_ckss"]:checked').data("name"));var o=$("#"+$("#glo-title").data("id"));o.data("tag-type",$('input[name="search_ckss"]:checked').data("type")),o.data("tag-id",$('input[name="search_ckss"]:checked').data("id")),o.data("tag-name",$('input[name="search_ckss"]:checked').data("name")),o.data("bingding-status",1),$("#glo-btn-img").show(),$("#glo-btn-img").attr("src","images/img/rights.png"),layer.close(e)}},btn2:function(e){$("#tagWrongImg").hide(),layer.close(e)}})}),$("#glo-checkbox").on("ifChanged",function(e){if(""!==$("#glo-title").data("id")){var o=$("#"+$("#glo-title").data("id"));$(this).is(":checked")?o.data("readonly",!0):o.data("readonly",!1)}});